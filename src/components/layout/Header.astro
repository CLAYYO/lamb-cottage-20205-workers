---
// Header component with logo, navigation, and Book Online button
const currentPath = Astro.url.pathname;
---

<header class="bg-white shadow-soft" transition:name="header">
  <!-- Top Header with Logo and CTA -->
  <div class="py-4 px-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <!-- Logo Section -->
      <div class="flex items-center space-x-3">
        <a href="/" class="flex items-center space-x-3">
          <img 
            src="/lamb-cottage-logo.png" 
            alt="Lamb Cottage Caravan Park Logo" 
            class="h-12 w-auto sm:h-16 hover:scale-105 transition-transform duration-200"
            loading="eager"
            transition:name="logo"
          />
          <div class="hidden sm:block">
            <h1 class="text-xl sm:text-2xl font-bold text-lamb-green-dark leading-tight">
              Lamb Cottage
              <span class="block text-lg sm:text-xl font-medium text-gray-600">
                Caravan Park
              </span>
            </h1>
          </div>
        </a>
      </div>
      
      <!-- Mobile Logo Text (shown on small screens) -->
      <div class="sm:hidden flex-1 ml-3">
        <a href="/">
          <h1 class="text-lg font-bold text-lamb-green-dark leading-tight">
            Lamb Cottage
            <span class="block text-sm font-medium text-gray-600">
              Caravan Park
            </span>
          </h1>
        </a>
      </div>
      
      <!-- Right Side Actions -->
      <div class="flex items-center space-x-2">
        <!-- Phone number (hidden on mobile) -->
        <a 
          href="tel:+441234567890" 
          class="hidden lg:flex items-center space-x-2 text-lamb-green-dark hover:text-lamb-green-medium transition-colors duration-200"
          aria-label="Call to book"
        >
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
          </svg>
          <span class="text-sm font-medium">01234 567890</span>
        </a>
        
        <!-- Mobile Menu Button -->
        <button 
          id="mobile-menu-button"
          class="md:hidden p-2 rounded-lg text-lamb-green-dark hover:bg-gray-100 transition-colors duration-200"
          aria-label="Toggle navigation menu"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
        
        <!-- Primary CTA Button -->
        <a 
          href="/contact" 
          class="bg-lamb-green-dark text-white px-4 py-2 sm:px-6 sm:py-3 rounded-lg font-semibold text-sm sm:text-base hover:bg-lamb-green-medium transform hover:scale-105 transition-all duration-200 shadow-medium hover:shadow-large flex items-center space-x-2"
          aria-label="Book online or make an enquiry"
        >
          <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
          </svg>
          <span class="hidden sm:inline">Book Online</span>
          <span class="sm:hidden">Book</span>
        </a>
      </div>
    </div>
  </div>
  
  <!-- Navigation Menu -->
  <nav class="border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4">
      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center justify-center space-x-8 py-4">
        <a 
          href="/" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Home
        </a>
        <a 
          href="/about" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/about' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          About Us
        </a>
        <a 
          href="/facilities" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/facilities' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Facilities
        </a>
        <a 
          href="/static-caravans" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/static-caravans' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Static Caravans
        </a>
        <a 
          href="/tariff" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/tariff' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Tariff &amp; Conditions
        </a>
        <a 
          href="/attractions" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/attractions' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Local Attractions
        </a>
        <a 
          href="/gallery" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/gallery' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Gallery
        </a>
        <a 
          href="/reviews" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/reviews' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Reviews
        </a>
        <a 
          href="/directions" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/directions' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Find Us
        </a>
        <a 
          href="/contact" 
          class={`text-sm font-medium transition-colors duration-200 hover:text-lamb-green-medium ${
            currentPath === '/contact' ? 'text-lamb-green-dark border-b-2 border-lamb-green-dark pb-1' : 'text-gray-700'
          }`}
        >
          Contact
        </a>
      </div>
      
      <!-- Mobile Navigation -->
      <div id="mobile-menu" class="md:hidden hidden py-4 space-y-2">
        <a 
          href="/" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Home
        </a>
        <a 
          href="/about" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/about' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          About Us
        </a>
        <a 
          href="/facilities" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/facilities' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Facilities
        </a>
        <a 
          href="/static-caravans" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/static-caravans' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Static Caravans
        </a>
        <a 
          href="/tariff" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/tariff' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Tariff &amp; Conditions
        </a>
        <a 
          href="/attractions" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/attractions' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Local Attractions
        </a>
        <a 
          href="/gallery" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/gallery' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Gallery
        </a>
        <a 
          href="/reviews" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/reviews' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Reviews
        </a>
        <a 
          href="/directions" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/directions' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Find Us
        </a>
        <a 
          href="/contact" 
          class={`block px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${
            currentPath === '/contact' ? 'bg-lamb-green-light text-lamb-green-dark' : 'text-gray-700 hover:bg-gray-100'
          }`}
        >
          Contact
        </a>
      </div>
    </div>
  </nav>
</header>

<script>
  // Mobile menu toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
        
        // Update button icon
        const svg = mobileMenuButton.querySelector('svg');
        const path = svg.querySelector('path');
        
        if (mobileMenu.classList.contains('hidden')) {
          // Show hamburger icon
          path.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        } else {
          // Show close icon
          path.setAttribute('d', 'M6 18L18 6M6 6l12 12');
        }
      });
      
      // Close mobile menu when clicking on a link
      const mobileLinks = mobileMenu.querySelectorAll('a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', function() {
          mobileMenu.classList.add('hidden');
          const svg = mobileMenuButton.querySelector('svg');
          const path = svg.querySelector('path');
          path.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        });
      });
    }
  });
</script>

<style>
  /* Ensure smooth transitions and hover effects */
  header {
    position: relative;
    z-index: 10;
  }
  
  /* Logo hover effect */
  img:hover {
    transform: scale(1.05);
    transition: transform 0.2s ease-in-out;
  }
  
  /* Button animations */
  .transform {
    transition: transform 0.2s ease-in-out;
  }
  
  /* Mobile menu animations */
  #mobile-menu {
    transition: all 0.3s ease-in-out;
  }
  
  /* Active navigation states */
  nav a {
    position: relative;
  }
  
  /* Smooth hover transitions for navigation */
  nav a:hover {
    transform: translateY(-1px);
  }
</style>